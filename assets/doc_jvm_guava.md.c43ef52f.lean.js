import{_ as A,c as i,e as s,w as a,d as n,b as C,r as l,o as u}from"./app.c1ff4fc5.js";const v=JSON.parse('{"title":"guava","description":"","frontmatter":{},"headers":[],"relativePath":"doc/jvm/guava.md","lastUpdated":1683013802000}'),m={name:"doc/jvm/guava.md"},d=C("",26),h=C("",8);function E(f,k,g,b,_,q){const e=l("mtext"),o=l("mo"),t=l("mfrac"),p=l("mn"),c=l("msqrt"),r=l("mrow"),D=l("annotation"),y=l("semantics"),F=l("math");return u(),i("div",null,[d,s(F,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:a(()=>[s(y,null,{default:a(()=>[s(r,null,{default:a(()=>[s(e,null,{default:a(()=>[n("预热期")]),_:1}),s(o,null,{default:a(()=>[n("=")]),_:1}),s(t,null,{default:a(()=>[s(e,null,{default:a(()=>[n("桶容量")]),_:1}),s(e,null,{default:a(()=>[n("稳定速率")]),_:1})]),_:1}),s(o,null,{default:a(()=>[n("×")]),_:1}),s(t,null,{default:a(()=>[s(c,null,{default:a(()=>[s(p,null,{default:a(()=>[n("3")]),_:1})]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1})]),_:1}),s(D,{encoding:"application/x-tex"},{default:a(()=>[n("\\text{预热期} = \\frac{\\text{桶容量}}{\\text{稳定速率}} \\times \\frac{\\sqrt{3}}{2} ")]),_:1})]),_:1})]),_:1}),n(" 这个公式是基于guava的RateLimiter使用SmoothWarmingUp模式来实现预热效果的假设。SmoothWarmingUp模式使用了一个平滑曲线来计算许可的发放时间和存储的许可数。你可以在中看到SmoothWarmingUp模式的源码和详细解释。 将桶容量设为50个令牌，稳定速率设为10个令牌每秒，代入公式，得到： "),s(F,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block"},{default:a(()=>[s(y,null,{default:a(()=>[s(r,null,{default:a(()=>[s(e,null,{default:a(()=>[n("预热期")]),_:1}),s(o,null,{default:a(()=>[n("=")]),_:1}),s(t,null,{default:a(()=>[s(p,null,{default:a(()=>[n("50")]),_:1}),s(p,null,{default:a(()=>[n("10")]),_:1})]),_:1}),s(o,null,{default:a(()=>[n("×")]),_:1}),s(t,null,{default:a(()=>[s(c,null,{default:a(()=>[s(p,null,{default:a(()=>[n("3")]),_:1})]),_:1}),s(p,null,{default:a(()=>[n("2")]),_:1})]),_:1}),s(o,null,{default:a(()=>[n("≈")]),_:1}),s(p,null,{default:a(()=>[n("2.16")]),_:1})]),_:1}),s(D,{encoding:"application/x-tex"},{default:a(()=>[n("\\text{预热期} = \\frac{50}{10} \\times \\frac{\\sqrt{3}}{2} \\approx 2.16 ")]),_:1})]),_:1})]),_:1}),n(" 因此，你可以将预热期设置为大约2.16秒，这样就可以使桶容量接近50个令牌。下面是一个使用guava的RateLimiter来配置每秒可以生成10个令牌，并且桶内最多可以存放50个令牌的代码示例： "),h])}const S=A(m,[["render",E]]);export{v as __pageData,S as default};
