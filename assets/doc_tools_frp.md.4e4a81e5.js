import{_ as s,c as a,o as n,a as l}from"./app.988cb848.js";const p="/assets/frp_1.fd6e0d00.png",h=JSON.parse('{"title":"FRP","description":"","frontmatter":{},"headers":[],"relativePath":"doc/tools/frp.md","lastUpdated":1733723826000}'),e={name:"doc/tools/frp.md"},o=l('<h1 id="frp" tabindex="-1">FRP <a class="header-anchor" href="#frp" aria-hidden="true">#</a></h1><p>A fast reverse proxy to help you expose a local server behind a NAT or firewall to the internet.</p><ul><li>github: <a href="https://github.com/fatedier/frp" target="_blank" rel="noreferrer">https://github.com/fatedier/frp</a></li></ul><p><strong>frp</strong>（Fast Reverse Proxy）。它是一个开源、高性能的反向代理应用程序，用于内网穿透场景。</p><h3 id="主要功能" tabindex="-1">主要功能 <a class="header-anchor" href="#主要功能" aria-hidden="true">#</a></h3><ol><li><p><strong>内网穿透</strong><br> 将本地服务暴露到公网上，无需公网 IP。例如，将本地的 HTTP 服务通过公网访问。</p></li><li><p><strong>支持多种协议</strong><br> 支持 TCP、UDP、HTTP、HTTPS，以及基于 WebSocket 的代理。</p></li><li><p><strong>自定义域名和子域名</strong><br> 支持绑定自定义域名或使用子域名来访问服务。</p></li><li><p><strong>访问控制</strong><br> 提供令牌验证功能，确保代理服务的安全。</p></li><li><p><strong>跨平台支持</strong><br> 支持 Windows、Linux、macOS 等多种操作系统。</p></li><li><p><strong>负载均衡</strong><br> 内置了负载均衡功能，可对流量进行均衡分发。</p></li><li><p><strong>插件扩展</strong><br> 支持通过插件扩展功能，例如实现认证、数据统计等需求。</p></li></ol><h3 id="使用场景" tabindex="-1">使用场景 <a class="header-anchor" href="#使用场景" aria-hidden="true">#</a></h3><ul><li>内网开发测试时，将服务暴露给远程的开发者或测试团队。</li><li>远程访问家用设备（如 NAS）。</li><li>快速搭建临时的服务发布平台。</li><li>为 Docker 容器或 Kubernetes 集群中的应用提供反向代理支持。</li></ul><h3 id="场景实例" tabindex="-1">场景实例 <a class="header-anchor" href="#场景实例" aria-hidden="true">#</a></h3><p>使用 <strong>frp</strong> 将内网机器 B 的 ssh 端口 通过可以被外网访问的机器 A 映射到外网</p><p><img src="'+p+`" alt="frp_1"></p><h4 id="相关配置" tabindex="-1">相关配置 <a class="header-anchor" href="#相关配置" aria-hidden="true">#</a></h4><ul><li>A 服务器(可以与外网互相访问)</li></ul><div class="language-toml"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># frps.toml</span></span>
<span class="line"><span style="color:#A6ACCD;">bindPort </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17000</span></span>
<span class="line"><span style="color:#A6ACCD;">token </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> xxx             -&gt; 考虑设置一个token 校验</span></span>
<span class="line"></span></code></pre></div><ul><li>B 服务器(无法通过外网访问，但可以访问服务器A)</li></ul><div class="language-toml"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># frpc.toml</span></span>
<span class="line"><span style="color:#A6ACCD;">serverAddr </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">x.x.x.x</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">   -&gt; A服务器的外网地址</span></span>
<span class="line"><span style="color:#A6ACCD;">serverPort </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17000</span></span>
<span class="line"><span style="color:#A6ACCD;">token </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> xxx              -&gt; 匹配 frps 的 token</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[[</span><span style="color:#FFCB6B;">proxies</span><span style="color:#89DDFF;">]]</span></span>
<span class="line"><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">ssh</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">type </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tcp</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">localIP </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">127.0.0.1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">localPort </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">22</span><span style="color:#A6ACCD;">          -&gt; 需要映射的本地端口</span></span>
<span class="line"><span style="color:#A6ACCD;">remotePort </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6000</span><span style="color:#A6ACCD;">       -&gt; 期望映射到A服务器的端口号</span></span>
<span class="line"></span></code></pre></div><p>附 systemd 配置</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">[Unit]</span></span>
<span class="line"><span style="color:#A6ACCD;">Description = frp client</span></span>
<span class="line"><span style="color:#A6ACCD;">After = network.target network-online.target syslog.target</span></span>
<span class="line"><span style="color:#A6ACCD;">Wants = network-online.target</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">[Service]</span></span>
<span class="line"><span style="color:#A6ACCD;">Type = simple</span></span>
<span class="line"><span style="color:#A6ACCD;">Restart=always</span></span>
<span class="line"><span style="color:#A6ACCD;">RestartSec=5</span></span>
<span class="line"><span style="color:#A6ACCD;">ExecStartPre = /bin/sleep 15</span></span>
<span class="line"><span style="color:#A6ACCD;">ExecStart = /home/xxx/frpc -c /home/xxx/frpc.ini</span></span>
<span class="line"><span style="color:#A6ACCD;">LimitNOFILE=1048576</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span>
<span class="line"><span style="color:#A6ACCD;">[Install]</span></span>
<span class="line"><span style="color:#A6ACCD;">WantedBy = multi-user.target</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre></div><h3 id="更多详细用例可以参考-frp-github页面" tabindex="-1">更多详细用例可以参考 frp-github页面 <a class="header-anchor" href="#更多详细用例可以参考-frp-github页面" aria-hidden="true">#</a></h3><ul><li>github: <a href="https://github.com/fatedier/frp" target="_blank" rel="noreferrer">https://github.com/fatedier/frp</a></li></ul>`,20),t=[o];function r(c,i,C,A,D,y){return n(),a("div",null,t)}const g=s(e,[["render",r]]);export{h as __pageData,g as default};
